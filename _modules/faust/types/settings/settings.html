
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>faust.types.settings.settings &#8212; Faust 0.2.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/alabaster.css" />
    <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/jquery.js"></script>
    <script src="../../../../_static/underscore.js"></script>
    <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="copyright" title="Copyright" href="../../../../copyright.html" />
   
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for faust.types.settings.settings</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">socket</span>
<span class="kn">import</span> <span class="nn">ssl</span>
<span class="kn">import</span> <span class="nn">typing</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="k">import</span> <span class="n">timedelta</span><span class="p">,</span> <span class="n">timezone</span><span class="p">,</span> <span class="n">tzinfo</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="k">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">Any</span><span class="p">,</span>
    <span class="n">Callable</span><span class="p">,</span>
    <span class="n">ClassVar</span><span class="p">,</span>
    <span class="n">Iterable</span><span class="p">,</span>
    <span class="n">List</span><span class="p">,</span>
    <span class="n">Mapping</span><span class="p">,</span>
    <span class="n">Optional</span><span class="p">,</span>
    <span class="n">Type</span><span class="p">,</span>
    <span class="n">Union</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">uuid</span> <span class="k">import</span> <span class="n">uuid4</span>

<span class="kn">from</span> <span class="nn">mode</span> <span class="k">import</span> <span class="n">SupervisorStrategyT</span>
<span class="kn">from</span> <span class="nn">mode.utils.imports</span> <span class="k">import</span> <span class="n">SymbolArg</span><span class="p">,</span> <span class="n">symbol_by_name</span>
<span class="kn">from</span> <span class="nn">mode.utils.logging</span> <span class="k">import</span> <span class="n">Severity</span>
<span class="kn">from</span> <span class="nn">mode.utils.times</span> <span class="k">import</span> <span class="n">Seconds</span><span class="p">,</span> <span class="n">want_seconds</span>
<span class="kn">from</span> <span class="nn">yarl</span> <span class="k">import</span> <span class="n">URL</span>

<span class="kn">from</span> <span class="nn">faust.types._env</span> <span class="k">import</span> <span class="n">DATADIR</span><span class="p">,</span> <span class="n">WEB_BIND</span><span class="p">,</span> <span class="n">WEB_PORT</span><span class="p">,</span> <span class="n">WEB_TRANSPORT</span>
<span class="kn">from</span> <span class="nn">faust.types.agents</span> <span class="k">import</span> <span class="n">AgentT</span>
<span class="kn">from</span> <span class="nn">faust.types.assignor</span> <span class="k">import</span> <span class="n">LeaderAssignorT</span><span class="p">,</span> <span class="n">PartitionAssignorT</span>
<span class="kn">from</span> <span class="nn">faust.types.auth</span> <span class="k">import</span> <span class="n">CredentialsArg</span><span class="p">,</span> <span class="n">CredentialsT</span>
<span class="kn">from</span> <span class="nn">faust.types.codecs</span> <span class="k">import</span> <span class="n">CodecArg</span>
<span class="kn">from</span> <span class="nn">faust.types.enums</span> <span class="k">import</span> <span class="n">ProcessingGuarantee</span>
<span class="kn">from</span> <span class="nn">faust.types.events</span> <span class="k">import</span> <span class="n">EventT</span>
<span class="kn">from</span> <span class="nn">faust.types.router</span> <span class="k">import</span> <span class="n">RouterT</span>
<span class="kn">from</span> <span class="nn">faust.types.sensors</span> <span class="k">import</span> <span class="n">SensorT</span>
<span class="kn">from</span> <span class="nn">faust.types.serializers</span> <span class="k">import</span> <span class="n">RegistryT</span><span class="p">,</span> <span class="n">SchemaT</span>
<span class="kn">from</span> <span class="nn">faust.types.streams</span> <span class="k">import</span> <span class="n">StreamT</span>
<span class="kn">from</span> <span class="nn">faust.types.tables</span> <span class="k">import</span> <span class="n">GlobalTableT</span><span class="p">,</span> <span class="n">TableManagerT</span><span class="p">,</span> <span class="n">TableT</span>
<span class="kn">from</span> <span class="nn">faust.types.topics</span> <span class="k">import</span> <span class="n">TopicT</span>
<span class="kn">from</span> <span class="nn">faust.types.transports</span> <span class="k">import</span> <span class="n">PartitionerT</span><span class="p">,</span> <span class="n">SchedulingStrategyT</span>
<span class="kn">from</span> <span class="nn">faust.types.web</span> <span class="k">import</span> <span class="n">HttpClientT</span><span class="p">,</span> <span class="n">ResourceOptions</span>

<span class="kn">from</span> <span class="nn">.</span> <span class="k">import</span> <span class="n">base</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">sections</span>
<span class="kn">from</span> <span class="nn">.params</span> <span class="k">import</span> <span class="n">BrokerArg</span><span class="p">,</span> <span class="n">URLArg</span>

<span class="k">if</span> <span class="n">typing</span><span class="o">.</span><span class="n">TYPE_CHECKING</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">faust.types.worker</span> <span class="k">import</span> <span class="n">Worker</span> <span class="k">as</span> <span class="n">_WorkerT</span>
<span class="k">else</span><span class="p">:</span>

    <span class="k">class</span> <span class="nc">_WorkerT</span><span class="p">:</span>
        <span class="o">...</span>  <span class="c1"># noqa</span>


<span class="c1"># XXX mypy borks if we do `from faust import __version__`</span>
<span class="n">faust_version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">symbol_by_name</span><span class="p">(</span><span class="s2">&quot;faust:__version__&quot;</span><span class="p">)</span>

<span class="n">AutodiscoverArg</span> <span class="o">=</span> <span class="n">Union</span><span class="p">[</span>
    <span class="nb">bool</span><span class="p">,</span>
    <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">Callable</span><span class="p">[[],</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
<span class="p">]</span>


<div class="viewcode-block" id="Settings"><a class="viewcode-back" href="../../../../reference/faust.types.settings.settings.html#faust.Settings">[docs]</a><span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">SettingsRegistry</span><span class="p">):</span>
    <span class="n">NODE_HOSTNAME</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">gethostname</span><span class="p">()</span>
    <span class="n">DEFAULT_BROKER_URL</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;kafka://localhost:9092&quot;</span>

    <span class="n">_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">_version</span><span class="p">:</span> <span class="nb">int</span>

    <span class="c1">#: Environment.</span>
    <span class="c1">#: Defaults to :data:`os.environ`.</span>
    <span class="n">env</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="c1"># Common settings:</span>
        <span class="n">autodiscover</span><span class="p">:</span> <span class="n">AutodiscoverArg</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">datadir</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">tabledir</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">debug</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">env_prefix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">id_format</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">origin</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timezone</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">tzinfo</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">version</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="c1"># Agent settings:</span>
        <span class="n">agent_supervisor</span><span class="p">:</span> <span class="n">SymbolArg</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">SupervisorStrategyT</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="c1"># Broker settings:</span>
        <span class="n">broker</span><span class="p">:</span> <span class="n">BrokerArg</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">broker_consumer</span><span class="p">:</span> <span class="n">BrokerArg</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">broker_producer</span><span class="p">:</span> <span class="n">BrokerArg</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">broker_api_version</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">broker_check_crcs</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">broker_client_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">broker_commit_every</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">broker_commit_interval</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Seconds</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">broker_commit_livelock_soft_timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Seconds</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">broker_credentials</span><span class="p">:</span> <span class="n">CredentialsArg</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">broker_heartbeat_interval</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Seconds</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">broker_max_poll_interval</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Seconds</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">broker_max_poll_records</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">broker_rebalance_timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Seconds</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">broker_request_timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Seconds</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">broker_session_timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Seconds</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">ssl_context</span><span class="p">:</span> <span class="n">ssl</span><span class="o">.</span><span class="n">SSLContext</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="c1"># Consumer settings:</span>
        <span class="n">consumer_api_version</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">consumer_max_fetch_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">consumer_auto_offset_reset</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">consumer_group_instance_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">consumer_metadata_max_age_ms</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">consumer_connections_max_idle_ms</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="c1"># Topic serialization settings:</span>
        <span class="n">key_serializer</span><span class="p">:</span> <span class="n">CodecArg</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">value_serializer</span><span class="p">:</span> <span class="n">CodecArg</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="c1"># Logging settings:</span>
        <span class="n">logging_config</span><span class="p">:</span> <span class="n">Mapping</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">loghandlers</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">logging</span><span class="o">.</span><span class="n">Handler</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="c1"># Producer settings:</span>
        <span class="n">producer_acks</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">producer_api_version</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">producer_compression_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">producer_linger_ms</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">producer_max_batch_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">producer_max_request_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">producer_partitioner</span><span class="p">:</span> <span class="n">SymbolArg</span><span class="p">[</span><span class="n">PartitionerT</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">producer_request_timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Seconds</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">producer_threaded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">producer_metadata_max_age_ms</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">producer_connections_max_idle_ms</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="c1"># RPC settings:</span>
        <span class="n">reply_create_topic</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">reply_expires</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Seconds</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">reply_to</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">reply_to_prefix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="c1"># Stream settings:</span>
        <span class="n">processing_guarantee</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ProcessingGuarantee</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">stream_buffer_maxsize</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">stream_processing_timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Seconds</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">stream_publish_on_commit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">stream_recovery_delay</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Seconds</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">stream_wait_empty</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="c1"># Table settings:</span>
        <span class="n">store</span><span class="p">:</span> <span class="n">URLArg</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">table_cleanup_interval</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Seconds</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">table_key_index_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">table_standby_replicas</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="c1"># Topic settings:</span>
        <span class="n">topic_allow_declare</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">topic_disable_leader</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">topic_partitions</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">topic_replication_factor</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="c1"># Web server settings:</span>
        <span class="n">cache</span><span class="p">:</span> <span class="n">URLArg</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">canonical_url</span><span class="p">:</span> <span class="n">URLArg</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">web</span><span class="p">:</span> <span class="n">URLArg</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">web_bind</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">web_cors_options</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ResourceOptions</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">web_enabled</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">web_host</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">web_in_thread</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">web_port</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">web_ssl_context</span><span class="p">:</span> <span class="n">ssl</span><span class="o">.</span><span class="n">SSLContext</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">web_transport</span><span class="p">:</span> <span class="n">URLArg</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="c1"># Worker settings:</span>
        <span class="n">worker_redirect_stdouts</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">worker_redirect_stdouts_level</span><span class="p">:</span> <span class="n">Severity</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="c1"># Extension settings:</span>
        <span class="n">Agent</span><span class="p">:</span> <span class="n">SymbolArg</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">AgentT</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">ConsumerScheduler</span><span class="p">:</span> <span class="n">SymbolArg</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">SchedulingStrategyT</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">Event</span><span class="p">:</span> <span class="n">SymbolArg</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">EventT</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">Schema</span><span class="p">:</span> <span class="n">SymbolArg</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">SchemaT</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">Stream</span><span class="p">:</span> <span class="n">SymbolArg</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">StreamT</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">Table</span><span class="p">:</span> <span class="n">SymbolArg</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">TableT</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">SetTable</span><span class="p">:</span> <span class="n">SymbolArg</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">TableT</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">GlobalTable</span><span class="p">:</span> <span class="n">SymbolArg</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">GlobalTableT</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">SetGlobalTable</span><span class="p">:</span> <span class="n">SymbolArg</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">GlobalTableT</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">TableManager</span><span class="p">:</span> <span class="n">SymbolArg</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">TableManagerT</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">Serializers</span><span class="p">:</span> <span class="n">SymbolArg</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">RegistryT</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">Worker</span><span class="p">:</span> <span class="n">SymbolArg</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">_WorkerT</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">PartitionAssignor</span><span class="p">:</span> <span class="n">SymbolArg</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">PartitionAssignorT</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">LeaderAssignor</span><span class="p">:</span> <span class="n">SymbolArg</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">LeaderAssignorT</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">Router</span><span class="p">:</span> <span class="n">SymbolArg</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">RouterT</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">Topic</span><span class="p">:</span> <span class="n">SymbolArg</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">TopicT</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">HttpClient</span><span class="p">:</span> <span class="n">SymbolArg</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">HttpClientT</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">Monitor</span><span class="p">:</span> <span class="n">SymbolArg</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">SensorT</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="c1"># Deprecated settings:</span>
        <span class="n">stream_ack_cancelled_tasks</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">stream_ack_exceptions</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">url</span><span class="p">:</span> <span class="n">URLArg</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="o">...</span>  <span class="c1"># replaced by __init_subclass__ in BaseSettings</span>

<div class="viewcode-block" id="Settings.on_init"><a class="viewcode-back" href="../../../../reference/faust.types.settings.settings.html#faust.Settings.on_init">[docs]</a>    <span class="k">def</span> <span class="nf">on_init</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># version is required for the id</span>
        <span class="c1"># and the id is required as a component in several default</span>
        <span class="c1"># setting values so we hack this in here to make sure</span>
        <span class="c1"># it&#39;s set.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init_env_prefix</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_version</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;version&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="nb">id</span></div>

    <span class="k">def</span> <span class="nf">_init_env_prefix</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">env</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">env_prefix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">env</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">env</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">env</span> <span class="o">=</span> <span class="n">env</span>
        <span class="n">env_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SETTINGS</span><span class="p">[</span><span class="s2">&quot;env_prefix&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">env_name</span>
        <span class="k">if</span> <span class="n">env_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">prefix_from_env</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">env_name</span><span class="p">)</span>
            <span class="c1"># prioritize environment</span>
            <span class="k">if</span> <span class="n">prefix_from_env</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_env_prefix</span> <span class="o">=</span> <span class="n">prefix_from_env</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># then use provided argument</span>
                <span class="k">if</span> <span class="n">env_prefix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_env_prefix</span> <span class="o">=</span> <span class="n">env_prefix</span>

<div class="viewcode-block" id="Settings.getenv"><a class="viewcode-back" href="../../../../reference/faust.types.settings.settings.html#faust.Settings.getenv">[docs]</a>    <span class="k">def</span> <span class="nf">getenv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">env_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_env_prefix</span><span class="p">:</span>
            <span class="n">env_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_env_prefix</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="n">env_name</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">env_name</span><span class="p">)</span></div>

<div class="viewcode-block" id="Settings.relative_to_appdir"><a class="viewcode-back" href="../../../../reference/faust.types.settings.settings.html#faust.Settings.relative_to_appdir">[docs]</a>    <span class="k">def</span> <span class="nf">relative_to_appdir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Prepare app directory path.</span>

<span class="sd">        If path is absolute the path is returned as-is,</span>
<span class="sd">        but if path is relative it will be assumed to belong</span>
<span class="sd">        under the app directory.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">path</span> <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">is_absolute</span><span class="p">()</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">appdir</span> <span class="o">/</span> <span class="n">path</span></div>

<div class="viewcode-block" id="Settings.data_directory_for_version"><a class="viewcode-back" href="../../../../reference/faust.types.settings.settings.html#faust.Settings.data_directory_for_version">[docs]</a>    <span class="k">def</span> <span class="nf">data_directory_for_version</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">version</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return the directory path for data belonging to specific version.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">datadir</span> <span class="o">/</span> <span class="n">f</span><span class="s2">&quot;v</span><span class="si">{version}</span><span class="s2">&quot;</span></div>

<div class="viewcode-block" id="Settings.find_old_versiondirs"><a class="viewcode-back" href="../../../../reference/faust.types.settings.settings.html#faust.Settings.find_old_versiondirs">[docs]</a>    <span class="k">def</span> <span class="nf">find_old_versiondirs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Path</span><span class="p">]:</span>
        <span class="k">for</span> <span class="n">version</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">)):</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_directory_for_version</span><span class="p">(</span><span class="n">version</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
                <span class="k">yield</span> <span class="n">path</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="c1"># name is a read-only property</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span>

    <span class="nd">@id</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prepare_id</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>  <span class="c1"># id is name+version</span>

    <span class="k">def</span> <span class="nf">_prepare_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">id_format</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="bp">self</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">id</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">f</span><span class="s2">&quot;&lt;{type(self).__name__}: </span><span class="si">{self.id}</span><span class="s2">&gt;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">appdir</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_directory_for_version</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>

    <span class="c1"># This is an example new setting having type ``str``</span>
    <span class="nd">@sections</span><span class="o">.</span><span class="n">Common</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Str</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;ENVIRONMENT_VARIABLE_NAME&quot;</span><span class="p">,</span>
        <span class="n">version_removed</span><span class="o">=</span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>  <span class="c1"># this disables the setting</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">MY_SETTING</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;My custom setting.</span>

<span class="sd">        To contribute new settings you only have to define a new</span>
<span class="sd">        setting decorated attribute here.</span>

<span class="sd">        Look at the other settings for examples.</span>

<span class="sd">        Remember that once you&#39;ve added the setting you must</span>
<span class="sd">        also render the configuration reference:</span>

<span class="sd">        .. sourcecode:: console</span>

<span class="sd">            $ make configref</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Common</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Param</span><span class="p">[</span><span class="n">AutodiscoverArg</span><span class="p">,</span> <span class="n">AutodiscoverArg</span><span class="p">],</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">autodiscover</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AutodiscoverArg</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Automatic discovery of agents, tasks, timers, views and commands.</span>

<span class="sd">        Faust has an API to add different :mod:`asyncio` services and other</span>
<span class="sd">        user extensions, such as &quot;Agents&quot;, HTTP web views,</span>
<span class="sd">        command-line commands, and timers to your Faust workers.</span>
<span class="sd">        These can be defined in any module, so to discover them at startup,</span>
<span class="sd">        the worker needs to traverse packages looking for them.</span>

<span class="sd">        .. warning::</span>

<span class="sd">            The autodiscovery functionality uses the :pypi:`Venusian` library</span>
<span class="sd">            to scan wanted packages for ``@app.agent``, ``@app.page``,</span>
<span class="sd">            ``@app.command``, ``@app.task`` and ``@app.timer`` decorators,</span>
<span class="sd">            but to do so, it&#39;s required to traverse the package path and import</span>
<span class="sd">            every module in it.</span>

<span class="sd">            Importing random modules like this can be dangerous so make sure</span>
<span class="sd">            you follow Python programming best practices. Do not start</span>
<span class="sd">            threads; perform network I/O; do test monkey-patching for mocks or</span>
<span class="sd">            similar, as a side effect of importing a module.  If you encounter</span>
<span class="sd">            a case such as this then please find a way to perform your</span>
<span class="sd">            action in a lazy manner.</span>

<span class="sd">        .. warning::</span>

<span class="sd">            If the above warning is something you cannot fix, or if it&#39;s out</span>
<span class="sd">            of your control, then please set ``autodiscover=False`` and make</span>
<span class="sd">            sure the worker imports all modules where your</span>
<span class="sd">            decorators are defined.</span>

<span class="sd">        The value for this argument can be:</span>

<span class="sd">        ``bool``</span>
<span class="sd">            If ``App(autodiscover=True)`` is set, the autodiscovery will</span>
<span class="sd">            scan the package name described in the ``origin`` attribute.</span>

<span class="sd">            The ``origin`` attribute is automatically set when you start</span>
<span class="sd">            a worker using the :program:`faust` command line program,</span>
<span class="sd">            for example:</span>

<span class="sd">            .. sourcecode:: console</span>

<span class="sd">                faust -A example.simple worker</span>

<span class="sd">            The :option:`-A &lt;faust -A&gt;`, option specifies the app, but you</span>
<span class="sd">            can also create a shortcut entry point by calling ``app.main()``:</span>

<span class="sd">            .. sourcecode:: python</span>

<span class="sd">                if __name__ == &#39;__main__&#39;:</span>
<span class="sd">                    app.main()</span>

<span class="sd">            Then you can start the :program:`faust` program by executing for</span>
<span class="sd">            example ``python myscript.py worker --loglevel=INFO``, and it</span>
<span class="sd">            will use the correct application.</span>

<span class="sd">        ``Sequence[str]``</span>
<span class="sd">            The argument can also be a list of packages to scan::</span>

<span class="sd">                app = App(..., autodiscover=[&#39;proj_orders&#39;, &#39;proj_accounts&#39;])</span>

<span class="sd">        ``Callable[[], Sequence[str]]``</span>
<span class="sd">            The argument can also be a function returning a list of packages</span>
<span class="sd">            to scan::</span>

<span class="sd">                def get_all_packages_to_scan():</span>
<span class="sd">                    return [&#39;proj_orders&#39;, &#39;proj_accounts&#39;]</span>

<span class="sd">                app = App(..., autodiscover=get_all_packages_to_scan)</span>

<span class="sd">        ``False``</span>
<span class="sd">            If everything you need is in a self-contained module, or you</span>
<span class="sd">            import the stuff you need manually, just set ``autodiscover``</span>
<span class="sd">            to False and don&#39;t worry about it :-)</span>

<span class="sd">        .. admonition:: Django</span>

<span class="sd">            When using :pypi:`Django` and the :envvar:`DJANGO_SETTINGS_MODULE`</span>
<span class="sd">            environment variable is set, the Faust app will scan all packages</span>
<span class="sd">            found in the ``INSTALLED_APPS`` setting.</span>

<span class="sd">            If you&#39;re using Django you can use this to scan for</span>
<span class="sd">            agents/pages/commands in all packages</span>
<span class="sd">            defined in ``INSTALLED_APPS``.</span>

<span class="sd">            Faust will automatically detect that you&#39;re using Django</span>
<span class="sd">            and do the right thing if you do::</span>

<span class="sd">                app = App(..., autodiscover=True)</span>

<span class="sd">            It will find agents and other decorators in all of the</span>
<span class="sd">            reusable Django applications. If you want to manually control</span>
<span class="sd">            what packages are traversed, then provide a list::</span>

<span class="sd">                app = App(..., autodiscover=[&#39;package1&#39;, &#39;package2&#39;])</span>

<span class="sd">            or if you want exactly :const:`None` packages to be traversed,</span>
<span class="sd">            then provide a False:</span>

<span class="sd">                app = App(.., autodiscover=False)</span>

<span class="sd">            which is the default, so you can simply omit the argument.</span>

<span class="sd">        .. tip::</span>

<span class="sd">            For manual control over autodiscovery, you can also call the</span>
<span class="sd">            :meth:`@discover` method manually.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Common</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;APP_DATADIR&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">DATADIR</span><span class="p">,</span>
        <span class="n">related_cli_options</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;faust&quot;</span><span class="p">:</span> <span class="s2">&quot;--datadir&quot;</span><span class="p">},</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">datadir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Application data directory.</span>

<span class="sd">        The directory in which this instance stores the data used by</span>
<span class="sd">        local tables, etc.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - The data directory can also be set using the</span>
<span class="sd">              :option:`faust --datadir` option, from the command-line,</span>
<span class="sd">              so there is usually no reason to provide a default value</span>
<span class="sd">              when creating the app.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@datadir</span><span class="o">.</span><span class="n">on_get_value</span>  <span class="c1"># type: ignore</span>
    <span class="k">def</span> <span class="nf">_prepare_datadir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
        <span class="c1"># allow expanding variables in path</span>
        <span class="k">return</span> <span class="n">Path</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">conf</span><span class="o">=</span><span class="bp">self</span><span class="p">))</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Common</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
        <span class="c1">#: This path will be treated as relative to datadir,</span>
        <span class="c1">#: unless the provided poth is absolute.</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;tables&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;APP_TABLEDIR&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">tabledir</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Application table data directory.</span>

<span class="sd">        The directory in which this instance stores local table data.</span>
<span class="sd">        Usually you will want to configure the :setting:`datadir` setting,</span>
<span class="sd">        but if you want to store tables separately you can configure this one.</span>

<span class="sd">        If the path provided is relative (it has no leading slash), then the</span>
<span class="sd">        path will be considered to be relative to the :setting:`datadir`</span>
<span class="sd">        setting.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@tabledir</span><span class="o">.</span><span class="n">on_get_value</span>  <span class="c1"># type: ignore</span>
    <span class="k">def</span> <span class="nf">_prepare_tabledir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">relative_to_appdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Common</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Bool</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;APP_DEBUG&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">related_cli_options</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;faust&quot;</span><span class="p">:</span> <span class="s2">&quot;--debug&quot;</span><span class="p">},</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">debug</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Use in development to expose sensor information endpoint.</span>


<span class="sd">        .. tip::</span>

<span class="sd">            If you want to enable the sensor statistics endpoint in production,</span>
<span class="sd">            without enabling the :setting:`debug` setting, you can do so</span>
<span class="sd">            by adding the following code:</span>

<span class="sd">            .. sourcecode:: python</span>

<span class="sd">                app.web.blueprints.add(</span>
<span class="sd">                    &#39;/stats/&#39;, &#39;faust.web.apps.stats:blueprint&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Common</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Str</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;APP_ENV_PREFIX&quot;</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.11&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">ignore_default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">env_prefix</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Environment variable prefix.</span>

<span class="sd">        When configuring Faust by environent variables,</span>
<span class="sd">        this adds a common prefix to all Faust environment value names.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Common</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Str</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;APP_ID_FORMAT&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{id}</span><span class="s2">-v</span><span class="si">{self.version}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">id_format</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Application ID format template.</span>

<span class="sd">        The format string used to generate the final :setting:`id` value</span>
<span class="sd">        by combining it with the :setting:`version` parameter.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Common</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Str</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">origin</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;The reverse path used to find the app.</span>

<span class="sd">        For example if the app is located in::</span>

<span class="sd">            from myproj.app import app</span>

<span class="sd">        Then the ``origin`` should be ``&quot;myproj.app&quot;``.</span>

<span class="sd">        The :program:`faust worker` program will try to automatically set</span>
<span class="sd">        the origin, but if you are having problems with auto generated names</span>
<span class="sd">        then you can set origin manually.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Common</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Timezone</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.4&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;TIMEZONE&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">timezone</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">tzinfo</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Project timezone.</span>

<span class="sd">        The timezone used for date-related functionality such as cronjobs.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Common</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Int</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;APP_VERSION&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">min_value</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;App version.</span>

<span class="sd">        Version of the app, that when changed will create a new isolated</span>
<span class="sd">        instance of the application. The first version is 1,</span>
<span class="sd">        the second version is 2, and so on.</span>

<span class="sd">        .. admonition:: Source topics will not be affected by a version change.</span>

<span class="sd">            Faust applications will use two kinds of topics: source topics, and</span>
<span class="sd">            internally managed topics. The source topics are declared by the</span>
<span class="sd">            producer, and we do not have the opportunity to modify any</span>
<span class="sd">            configuration settings, like number of partitions for a source</span>
<span class="sd">            topic; we may only consume from them. To mark a topic as internal,</span>
<span class="sd">            use: ``app.topic(..., internal=True)``.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Agent</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="n">Type</span><span class="p">[</span><span class="n">SupervisorStrategyT</span><span class="p">]),</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;AGENT_SUPERVISOR&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;mode.OneForOneSupervisor&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">agent_supervisor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">SupervisorStrategyT</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Default agent supervisor type.</span>

<span class="sd">        An agent may start multiple instances (actors) when</span>
<span class="sd">        the concurrency setting is higher than one (e.g.</span>
<span class="sd">        ``@app.agent(concurrency=2)``).</span>

<span class="sd">        Multiple instances of the same agent are considered to be in the same</span>
<span class="sd">        supervisor group.</span>

<span class="sd">        The default supervisor is the :class:`mode.OneForOneSupervisor`:</span>
<span class="sd">        if an instance in the group crashes, we restart that instance only.</span>

<span class="sd">        These are the supervisors supported:</span>

<span class="sd">        + :class:`mode.OneForOneSupervisor`</span>

<span class="sd">            If an instance in the group crashes we restart only that instance.</span>

<span class="sd">        + :class:`mode.OneForAllSupervisor`</span>

<span class="sd">            If an instance in the group crashes we restart the whole group.</span>

<span class="sd">        + :class:`mode.CrashingSupervisor`</span>

<span class="sd">            If an instance in the group crashes we stop the whole application,</span>
<span class="sd">            and exit so that the Operating System supervisor can restart us.</span>

<span class="sd">        + :class:`mode.ForfeitOneForOneSupervisor`</span>

<span class="sd">            If an instance in the group crashes we give up on that instance</span>
<span class="sd">            and never restart it again (until the program is restarted).</span>

<span class="sd">        + :class:`mode.ForfeitOneForAllSupervisor`</span>

<span class="sd">            If an instance in the group crashes we stop all instances</span>
<span class="sd">            in the group and never restarted them again (until the program is</span>
<span class="sd">            restarted).</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Common</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Seconds</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;BLOCKING_TIMEOUT&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">related_cli_options</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;faust&quot;</span><span class="p">:</span> <span class="s2">&quot;--blocking-timeout&quot;</span><span class="p">},</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">blocking_timeout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Blocking timeout (in seconds).</span>

<span class="sd">        When specified the worker will start a periodic signal based</span>
<span class="sd">        timer that only triggers when the loop has been blocked</span>
<span class="sd">        for a time exceeding this timeout.</span>

<span class="sd">        This is the most safe way to detect blocking, but could have</span>
<span class="sd">        adverse effects on libraries that do not automatically</span>
<span class="sd">        retry interrupted system calls.</span>

<span class="sd">        Python itself does retry all interrupted system calls</span>
<span class="sd">        since version 3.5 (see :pep:`475`), but this might not</span>
<span class="sd">        be the case with C extensions added to the worker by the user.</span>

<span class="sd">        The blocking detector is a background thread</span>
<span class="sd">        that periodically wakes up to either arm a timer, or cancel</span>
<span class="sd">        an already armed timer. In pseudocode:</span>

<span class="sd">        .. sourcecode:: python</span>

<span class="sd">            while True:</span>
<span class="sd">                # cancel previous alarm and arm new alarm</span>
<span class="sd">                signal.signal(signal.SIGALRM, on_alarm)</span>
<span class="sd">                signal.setitimer(signal.ITIMER_REAL, blocking_timeout)</span>
<span class="sd">                # sleep to wakeup just before the timeout</span>
<span class="sd">                await asyncio.sleep(blocking_timeout * 0.96)</span>

<span class="sd">            def on_alarm(signum, frame):</span>
<span class="sd">                logger.warning(&#39;Blocking detected: ...&#39;)</span>

<span class="sd">        If the sleep does not wake up in time the alarm signal</span>
<span class="sd">        will be sent to the process and a traceback will be logged.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Common</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">BrokerList</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;BROKER_URL&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">broker</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">URL</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Broker URL, or a list of alternative broker URLs.</span>

<span class="sd">        Faust needs the URL of a &quot;transport&quot; to send and receive messages.</span>

<span class="sd">        Currently, the only supported production transport is ``kafka://``.</span>
<span class="sd">        This uses the :pypi:`aiokafka` client under the hood, for consuming and</span>
<span class="sd">        producing messages.</span>

<span class="sd">        You can specify multiple hosts at the same time by separating them</span>
<span class="sd">        using the semi-comma:</span>

<span class="sd">        .. sourcecode:: text</span>

<span class="sd">            kafka://kafka1.example.com:9092;kafka2.example.com:9092</span>

<span class="sd">        Which in actual code looks like this:</span>

<span class="sd">        .. sourcecode:: python</span>

<span class="sd">            BROKERS = &#39;kafka://kafka1.example.com:9092;kafka2.example.com:9092&#39;</span>
<span class="sd">            app = faust.App(</span>
<span class="sd">                &#39;id&#39;,</span>
<span class="sd">                broker=BROKERS,</span>
<span class="sd">            )</span>

<span class="sd">        You can also pass a list of URLs:</span>

<span class="sd">        .. sourcecode:: python</span>

<span class="sd">            app = faust.App(</span>
<span class="sd">                &#39;id&#39;,</span>
<span class="sd">                broker=[&#39;kafka://kafka1.example.com:9092&#39;,</span>
<span class="sd">                        &#39;kafka://kafka2.example.com:9092&#39;],</span>
<span class="sd">            )</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            You can configure the transport used for consuming and producing</span>
<span class="sd">            separately, by setting the :setting:`broker_consumer` and</span>
<span class="sd">            :setting:`broker_producer` settings.</span>

<span class="sd">            This setting is used as the default.</span>

<span class="sd">        **Available Transports**</span>

<span class="sd">        - ``kafka://``</span>

<span class="sd">            Alias to ``aiokafka://``</span>

<span class="sd">        - ``aiokafka://``</span>

<span class="sd">            The recommended transport using the :pypi:`aiokafka` client.</span>

<span class="sd">            Limitations: None</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@broker</span><span class="o">.</span><span class="n">on_set_default</span>  <span class="c1"># type: ignore</span>
    <span class="k">def</span> <span class="nf">_prepare_broker</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BrokerArg</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_BROKER_URL</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Broker</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">BrokerList</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.7&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;BROKER_CONSUMER_URL&quot;</span><span class="p">,</span>
        <span class="n">default_alias</span><span class="o">=</span><span class="s2">&quot;broker&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">broker_consumer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">URL</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Consumer broker URL.</span>

<span class="sd">        You can use this setting to configure the transport used for</span>
<span class="sd">        producing and consuming separately.</span>

<span class="sd">        If not set the value found in :setting:`broker` will be used.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Broker</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">BrokerList</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.7&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;BROKER_PRODUCER_URL&quot;</span><span class="p">,</span>
        <span class="n">default_alias</span><span class="o">=</span><span class="s2">&quot;broker&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">broker_producer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">URL</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Producer broker URL.</span>

<span class="sd">        You can use this setting to configure the transport used for</span>
<span class="sd">        producing and consuming separately.</span>

<span class="sd">        If not set the value found in :setting:`broker` will be used.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Broker</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Str</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.10&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;BROKER_API_VERSION&quot;</span><span class="p">,</span>
        <span class="c1">#: Default broker API version.</span>
        <span class="c1">#: Used as default for</span>
        <span class="c1">#:     + :setting:`broker_api_version`,</span>
        <span class="c1">#:     + :setting:`consumer_api_version`,</span>
        <span class="c1">#:     + :setting:`producer_api_version&#39;,</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;auto&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">broker_api_version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Broker API version,.</span>

<span class="sd">        This setting is also the default for :setting:`consumer_api_version`,</span>
<span class="sd">        and :setting:`producer_api_version`.</span>

<span class="sd">        Negotiate producer protocol version.</span>

<span class="sd">        The default value - &quot;auto&quot; means use the latest version supported</span>
<span class="sd">        by both client and server.</span>

<span class="sd">        Any other version set means you are requesting a specific version of</span>
<span class="sd">        the protocol.</span>

<span class="sd">        Example Kafka uses:</span>

<span class="sd">        **Disable sending headers for all messages produced**</span>

<span class="sd">        Kafka headers support was added in Kafka 0.11, so you can specify</span>
<span class="sd">        ``broker_api_version=&quot;0.10&quot;`` to remove the headers from messages.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Broker</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Bool</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;BROKER_CHECK_CRCS&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">broker_check_crcs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Broker CRC check.</span>

<span class="sd">        Automatically check the CRC32 of the records consumed.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Broker</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Str</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;BROKER_CLIENT_ID&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">f</span><span class="s2">&quot;faust-</span><span class="si">{faust_version}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">broker_client_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Broker client ID.</span>

<span class="sd">        There is rarely any reason to configure this setting.</span>

<span class="sd">        The client id is used to identify the software used, and is not usually</span>
<span class="sd">        configured by the user.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Broker</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">UnsignedInt</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;BROKER_COMMIT_EVERY&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">10_000</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">broker_commit_every</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Broker commit message frequency.</span>

<span class="sd">        Commit offset every n messages.</span>

<span class="sd">        See also :setting:`broker_commit_interval`, which is how frequently</span>
<span class="sd">        we commit on a timer when there are few messages being received.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Broker</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Seconds</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;BROKER_COMMIT_INTERVAL&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mf">2.8</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">broker_commit_interval</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Broker commit time frequency.</span>

<span class="sd">        How often we commit messages that have been</span>
<span class="sd">        fully processed (:term:`acked`).</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Broker</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Seconds</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;BROKER_COMMIT_LIVELOCK_SOFT_TIMEOUT&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">want_seconds</span><span class="p">(</span><span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">5</span><span class="p">)),</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">broker_commit_livelock_soft_timeout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Commit livelock timeout.</span>

<span class="sd">        How long time it takes before we warn that the Kafka commit offset has</span>
<span class="sd">        not advanced (only when processing messages).</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Common</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Credentials</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.5&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;BROKER_CREDENTIALS&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">broker_credentials</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CredentialsT</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Broker authentication mechanism.</span>

<span class="sd">        Specify the authentication mechanism to use when connecting to</span>
<span class="sd">        the broker.</span>

<span class="sd">        The default is to not use any authentication.</span>

<span class="sd">        SASL Authentication</span>
<span class="sd">            You can enable SASL authentication via plain text:</span>

<span class="sd">            .. sourcecode:: python</span>

<span class="sd">                app = faust.App(</span>
<span class="sd">                    broker_credentials=faust.SASLCredentials(</span>
<span class="sd">                        username=&#39;x&#39;,</span>
<span class="sd">                        password=&#39;y&#39;,</span>
<span class="sd">                    ))</span>

<span class="sd">            .. warning::</span>

<span class="sd">                Do not use literal strings when specifying passwords in</span>
<span class="sd">                production, as they can remain visible in stack traces.</span>

<span class="sd">                Instead the best practice is to get the password from</span>
<span class="sd">                a configuration file, or from the environment:</span>

<span class="sd">                .. sourcecode:: python</span>

<span class="sd">                    BROKER_USERNAME = os.environ.get(&#39;BROKER_USERNAME&#39;)</span>
<span class="sd">                    BROKER_PASSWORD = os.environ.get(&#39;BROKER_PASSWORD&#39;)</span>

<span class="sd">                    app = faust.App(</span>
<span class="sd">                        broker_credentials=faust.SASLCredentials(</span>
<span class="sd">                            username=BROKER_USERNAME,</span>
<span class="sd">                            password=BROKER_PASSWORD,</span>
<span class="sd">                        ))</span>

<span class="sd">        GSSAPI Authentication</span>
<span class="sd">            GSSAPI authentication over plain text:</span>

<span class="sd">            .. sourcecode:: python</span>

<span class="sd">                app = faust.App(</span>
<span class="sd">                    broker_credentials=faust.GSSAPICredentials(</span>
<span class="sd">                        kerberos_service_name=&#39;faust&#39;,</span>
<span class="sd">                        kerberos_domain_name=&#39;example.com&#39;,</span>
<span class="sd">                    ),</span>
<span class="sd">                )</span>

<span class="sd">            GSSAPI authentication over SSL:</span>

<span class="sd">            .. sourcecode:: python</span>

<span class="sd">                import ssl</span>
<span class="sd">                ssl_context = ssl.create_default_context(</span>
<span class="sd">                    purpose=ssl.Purpose.SERVER_AUTH, cafile=&#39;ca.pem&#39;)</span>
<span class="sd">                ssl_context.load_cert_chain(</span>
<span class="sd">                    &#39;client.cert&#39;, keyfile=&#39;client.key&#39;)</span>

<span class="sd">                app = faust.App(</span>
<span class="sd">                    broker_credentials=faust.GSSAPICredentials(</span>
<span class="sd">                        kerberos_service_name=&#39;faust&#39;,</span>
<span class="sd">                        kerberos_domain_name=&#39;example.com&#39;,</span>
<span class="sd">                        ssl_context=ssl_context,</span>
<span class="sd">                    ),</span>
<span class="sd">                )</span>

<span class="sd">        SSL Authentication</span>
<span class="sd">            Provide an SSL context for the Kafka broker connections.</span>

<span class="sd">            This allows Faust to use a secure SSL/TLS connection for the</span>
<span class="sd">            Kafka connections and enabling certificate-based authentication.</span>

<span class="sd">            .. sourcecode:: python</span>

<span class="sd">                import ssl</span>

<span class="sd">                ssl_context = ssl.create_default_context(</span>
<span class="sd">                    purpose=ssl.Purpose.SERVER_AUTH, cafile=&#39;ca.pem&#39;)</span>
<span class="sd">                ssl_context.load_cert_chain(</span>
<span class="sd">                    &#39;client.cert&#39;, keyfile=&#39;client.key&#39;)</span>
<span class="sd">                app = faust.App(..., broker_credentials=ssl_context)</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Broker</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Seconds</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.0.11&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;BROKER_HEARTBEAT_INTERVAL&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mf">3.0</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">broker_heartbeat_interval</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Broker heartbeat interval.</span>

<span class="sd">        How often we send heartbeats to the broker, and also how often</span>
<span class="sd">        we expect to receive heartbeats from the broker.</span>

<span class="sd">        If any of these time out, you should increase this setting.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Broker</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Seconds</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.7&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;BROKER_MAX_POLL_INTERVAL&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mf">1000.0</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">broker_max_poll_interval</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Broker max poll interval.</span>

<span class="sd">        The maximum allowed time (in seconds) between calls to consume messages</span>
<span class="sd">        If this interval is exceeded the consumer</span>
<span class="sd">        is considered failed and the group will rebalance in order to reassign</span>
<span class="sd">        the partitions to another consumer group member. If API methods block</span>
<span class="sd">        waiting for messages, that time does not count against this timeout.</span>

<span class="sd">        See `KIP-62`_ for technical details.</span>

<span class="sd">        .. _`KIP-62`:</span>
<span class="sd">            https://cwiki.apache.org/confluence/display/KAFKA/KIP-62%3A+Allow+consumer+to+send+heartbeats+from+a+background+thread</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Broker</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">UnsignedInt</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.4&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;BROKER_MAX_POLL_RECORDS&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">allow_none</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">broker_max_poll_records</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Broker max poll records.</span>

<span class="sd">        The maximum number of records returned in a single call to ``poll()``.</span>
<span class="sd">        If you find that your application needs more time to process</span>
<span class="sd">        messages you may want to adjust :setting:`broker_max_poll_records`</span>
<span class="sd">        to tune the number of records that must be handled on every</span>
<span class="sd">        loop iteration.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Broker</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Seconds</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.10&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;BROKER_REBALANCE_TIMEOUT&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mf">60.0</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">broker_rebalance_timeout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Broker rebalance timeout.</span>

<span class="sd">        How long to wait for a node to finish rebalancing before the broker</span>
<span class="sd">        will consider it dysfunctional and remove it from the cluster.</span>

<span class="sd">        Increase this if you experience the cluster being in a state of</span>
<span class="sd">        constantly rebalancing, but make sure you also increase the</span>
<span class="sd">        :setting:`broker_heartbeat_interval` at the same time.</span>

<span class="sd">        .. note::</span>

<span class="sd">            The session timeout must not be greater than the</span>
<span class="sd">            :setting:`broker_request_timeout`.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Broker</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Seconds</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.4&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;BROKER_REQUEST_TIMEOUT&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mf">90.0</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">broker_request_timeout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Kafka client request timeout.</span>

<span class="sd">        .. note::</span>

<span class="sd">            The request timeout must not be less than the</span>
<span class="sd">            :setting:`broker_session_timeout`.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Broker</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Seconds</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.0.11&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;BROKER_SESSION_TIMEOUT&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mf">60.0</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">broker_session_timeout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Broker session timeout.</span>

<span class="sd">        How long to wait for a node to finish rebalancing before the broker</span>
<span class="sd">        will consider it dysfunctional and remove it from the cluster.</span>

<span class="sd">        Increase this if you experience the cluster being in a state of</span>
<span class="sd">        constantly rebalancing, but make sure you also increase the</span>
<span class="sd">        :setting:`broker_heartbeat_interval` at the same time.</span>

<span class="sd">        .. note::</span>

<span class="sd">            The session timeout must not be greater than the</span>
<span class="sd">            :setting:`broker_request_timeout`.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Common</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">SSLContext</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">ssl_context</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ssl</span><span class="o">.</span><span class="n">SSLContext</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;SSL configuration.</span>

<span class="sd">        See :setting:`credentials`.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Consumer</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Str</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.10&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;CONSUMER_API_VERSION&quot;</span><span class="p">,</span>
        <span class="n">default_alias</span><span class="o">=</span><span class="s2">&quot;broker_api_version&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">consumer_api_version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Consumer API version.</span>

<span class="sd">        Configures the broker API version to use for consumers.</span>
<span class="sd">        See :setting:`broker_api_version` for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Consumer</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">UnsignedInt</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.4&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;CONSUMER_MAX_FETCH_SIZE&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">1024</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">consumer_max_fetch_size</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Consumer max fetch size.</span>

<span class="sd">        The maximum amount of data per-partition the server will return.</span>
<span class="sd">        This size must be at least as large as the maximum message size.</span>

<span class="sd">        Note: This is PER PARTITION, so a limit of 1Mb when your</span>
<span class="sd">        workers consume from 10 topics having 100 partitions each,</span>
<span class="sd">        means a fetch request can be up to a gigabyte (10 * 100 * 1Mb),</span>
<span class="sd">        This limit being too generous may cause</span>
<span class="sd">        rebalancing issues: if the amount of time required</span>
<span class="sd">        to flush pending data stuck in socket buffers exceed</span>
<span class="sd">        the rebalancing timeout.</span>

<span class="sd">        You must keep this limit low enough to account</span>
<span class="sd">        for many partitions being assigned to a single node.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Consumer</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Str</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.5&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;CONSUMER_AUTO_OFFSET_RESET&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;earliest&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">consumer_auto_offset_reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Consumer auto offset reset.</span>

<span class="sd">        Where the consumer should start reading messages from when</span>
<span class="sd">        there is no initial offset, or the stored offset no longer</span>
<span class="sd">        exists, e.g. when starting a new consumer for the first time.</span>

<span class="sd">        Options include &#39;earliest&#39;, &#39;latest&#39;, &#39;none&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Consumer</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Str</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;2.1&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;CONSUMER_GROUP_INSTANCE_ID&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">consumer_group_instance_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Consumer group instance id.</span>

<span class="sd">        The group_instance_id for static partition assignment.</span>

<span class="sd">        If not set, default assignment strategy is used. Otherwise,</span>
<span class="sd">        each consumer instance has to have a unique id.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Consumer</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Int</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;0.8.5&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;CONSUMER_METADATA_MAX_AGE_MS&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">5</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">consumer_metadata_max_age_ms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Consumer metadata max age milliseconds</span>

<span class="sd">        The period of time in milliseconds after which we force</span>
<span class="sd">        a refresh of metadata even if we havent seen any partition</span>
<span class="sd">        leadership changes to proactively discover any new brokers or partitions.</span>

<span class="sd">        Default: 300000</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Consumer</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Int</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;0.8.5&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;CONSUMER_CONNECTIONS_MAX_IDLE_MS&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">9</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">consumer_connections_max_idle_ms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Consumer connections max idle milliseconds.</span>

<span class="sd">        Close idle connections after the number of milliseconds</span>
<span class="sd">        specified by this config.</span>

<span class="sd">        Default: 540000 (9 minutes).</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Serialization</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Codec</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;APP_KEY_SERIALIZER&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;raw&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">key_serializer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CodecArg</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Default key serializer.</span>

<span class="sd">        Serializer used for keys by default when no serializer</span>
<span class="sd">        is specified, or a model is not being used.</span>

<span class="sd">        This can be the name of a serializer/codec, or an actual</span>
<span class="sd">        :class:`faust.serializers.codecs.Codec` instance.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - The :ref:`codecs` section in the model guide -- for</span>
<span class="sd">              more information about codecs.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Serialization</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Codec</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;APP_VALUE_SERIALIZER&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;json&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">value_serializer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CodecArg</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Default value serializer.</span>

<span class="sd">        Serializer used for values by default when no serializer</span>
<span class="sd">        is specified, or a model is not being used.</span>

<span class="sd">        This can be string, the name of a serializer/codec, or an actual</span>
<span class="sd">        :class:`faust.serializers.codecs.Codec` instance.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            - The :ref:`codecs` section in the model guide -- for</span>
<span class="sd">              more information about codecs.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Common</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.5&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">logging_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Logging dictionary configuration.</span>

<span class="sd">        Optional dictionary for logging configuration, as supported</span>
<span class="sd">        by :func:`logging.config.dictConfig`.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Common</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">LogHandlers</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">loghandlers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">logging</span><span class="o">.</span><span class="n">Handler</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;List of custom logging handlers.</span>

<span class="sd">        Specify a list of custom log handlers to use in worker instances.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Producer</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Int</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;PRODUCER_ACKS&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">number_aliases</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;all&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">},</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">producer_acks</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Producer Acks.</span>

<span class="sd">        The number of acknowledgments the producer requires the leader to have</span>
<span class="sd">        received before considering a request complete. This controls the</span>
<span class="sd">        durability of records that are sent. The following settings are common:</span>

<span class="sd">        * ``0``: Producer will not wait for any acknowledgment from</span>
<span class="sd">                 the server at all. The message will immediately be</span>
<span class="sd">                 considered sent (Not recommended).</span>
<span class="sd">        * ``1``: The broker leader will write the record to its local</span>
<span class="sd">                 log but will respond without awaiting full acknowledgment</span>
<span class="sd">                 from all followers. In this case should the leader fail</span>
<span class="sd">                 immediately after acknowledging the record but before the</span>
<span class="sd">                 followers have replicated it then the record will be lost.</span>
<span class="sd">        * ``-1``: The broker leader will wait for the full set of in-sync</span>
<span class="sd">                  replicas to acknowledge the record. This guarantees that</span>
<span class="sd">                  the record will not be lost as long as at least one in-sync</span>
<span class="sd">                  replica remains alive. This is the strongest</span>
<span class="sd">                  available guarantee.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Producer</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Str</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.5.3&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;PRODUCER_API_VERSION&quot;</span><span class="p">,</span>
        <span class="n">default_alias</span><span class="o">=</span><span class="s2">&quot;broker_api_version&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">producer_api_version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Producer API version.</span>

<span class="sd">        Configures the broker API version to use for producers.</span>
<span class="sd">        See :setting:`broker_api_version` for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Producer</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Str</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;PRODUCER_COMPRESSION_TYPE&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">producer_compression_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Producer compression type.</span>

<span class="sd">        The compression type for all data generated by the producer.</span>
<span class="sd">        Valid values are `gzip`, `snappy`, `lz4`, or :const:`None`.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Producer</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Seconds</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;PRODUCER_LINGER&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">producer_linger</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Producer batch linger configuration.</span>

<span class="sd">        Minimum time to batch before sending out messages from the producer.</span>

<span class="sd">        Should rarely have to change this.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@producer_linger</span><span class="o">.</span><span class="n">on_set_default</span>  <span class="c1"># type: ignore</span>
    <span class="k">def</span> <span class="nf">_prepare_producer_linger</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_producer_linger_ms</span><span class="p">)</span> <span class="o">/</span> <span class="mf">1000.0</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Producer</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">UnsignedInt</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;PRODUCER_MAX_BATCH_SIZE&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">16384</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">producer_max_batch_size</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Producer max batch size.</span>

<span class="sd">        Max size of each producer batch, in bytes.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Producer</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">UnsignedInt</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;PRODUCER_MAX_REQUEST_SIZE&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">1_000_000</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">producer_max_request_size</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Producer maximum request size.</span>

<span class="sd">        Maximum size of a request in bytes in the producer.</span>

<span class="sd">        Should rarely have to change this.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Producer</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">_Symbol</span><span class="p">[</span><span class="n">PartitionerT</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PartitionerT</span><span class="p">]],</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.2&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">producer_partitioner</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PartitionerT</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Producer partitioning strategy.</span>

<span class="sd">        The Kafka producer can be configured with a custom partitioner</span>
<span class="sd">        to change how keys are partitioned when producing to topics.</span>

<span class="sd">        The default partitioner for Kafka is implemented as follows,</span>
<span class="sd">        and can be used as a template for your own partitioner:</span>

<span class="sd">        .. sourcecode:: python</span>

<span class="sd">            import random</span>
<span class="sd">            from typing import List</span>
<span class="sd">            from kafka.partitioner.hashed import murmur2</span>

<span class="sd">            def partition(key: bytes,</span>
<span class="sd">                        all_partitions: List[int],</span>
<span class="sd">                        available: List[int]) -&gt; int:</span>
<span class="sd">                &#39;&#39;&#39;Default partitioner.</span>

<span class="sd">                Hashes key to partition using murmur2 hashing</span>
<span class="sd">                (from java client) If key is None, selects partition</span>
<span class="sd">                randomly from available, or from all partitions if none</span>
<span class="sd">                are currently available</span>

<span class="sd">                Arguments:</span>
<span class="sd">                    key: partitioning key</span>
<span class="sd">                    all_partitions: list of all partitions sorted by</span>
<span class="sd">                                    partition ID.</span>
<span class="sd">                    available: list of available partitions</span>
<span class="sd">                               in no particular order</span>
<span class="sd">                Returns:</span>
<span class="sd">                    int: one of the values from ``all_partitions``</span>
<span class="sd">                         or ``available``.</span>
<span class="sd">                &#39;&#39;&#39;</span>
<span class="sd">                if key is None:</span>
<span class="sd">                    source = available if available else all_paritions</span>
<span class="sd">                    return random.choice(source)</span>
<span class="sd">                index: int = murmur2(key)</span>
<span class="sd">                index &amp;= 0x7fffffff</span>
<span class="sd">                index %= len(all_partitions)</span>
<span class="sd">                return all_partitions[index]</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Producer</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Seconds</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.4&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;PRODUCER_REQUEST_TIMEOUT&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mf">1200.0</span><span class="p">,</span>  <span class="c1"># 20 minutes</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">producer_request_timeout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Producer request timeout.</span>

<span class="sd">        Timeout for producer operations.</span>
<span class="sd">        This is set high by default, as this is also the time when</span>
<span class="sd">        producer batches expire and will no longer be retried.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Producer</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Bool</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;0.4.5&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;PRODUCER_THREADED&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">producer_threaded</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Thread separate producer for send_soon.</span>

<span class="sd">        If True, spin up a different producer in a different thread</span>
<span class="sd">        to be used for messages buffered up for producing via</span>
<span class="sd">        send_soon function.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Producer</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Int</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;0.8.5&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;PRODUCER_METADATA_MAX_AGE_MS&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">5</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">producer_metadata_max_age_ms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Producer metadata max age milliseconds</span>

<span class="sd">        The period of time in milliseconds after which we force</span>
<span class="sd">        a refresh of metadata even if we havent seen any partition</span>
<span class="sd">        leadership changes to proactively discover any new brokers or partitions.</span>

<span class="sd">        Default: 300000</span>

<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Producer</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Int</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;0.8.5&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;PRODUCER_CONNECTIONS_MAX_IDLE_MS&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">9</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">producer_connections_max_idle_ms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Producer connections max idle milliseconds.</span>

<span class="sd">        Close idle connections after the number of milliseconds</span>
<span class="sd">        specified by this config.</span>

<span class="sd">        Default: 540000 (9 minutes).</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Stream</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Bool</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;0.4.7&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;RECOVERY_CONSISTENCY_CHECK&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">recovery_consistency_check</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Check Kafka and local offsets for consistency.</span>

<span class="sd">        If True, assert that Kafka highwater offsets &gt;= local offset</span>
<span class="sd">        in the rocksdb state storee</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Stream</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Bool</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;0.6.0&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;STORE_CHECK_EXISTS&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">store_check_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Execute exists on the underlying store.</span>

<span class="sd">        If True, executes exists on the underlying store. If False</span>
<span class="sd">        client has to catch KeyError</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Stream</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Bool</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;0.6.3&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;CRASH_APP_ON_AEROSPIKE_EXCEPTION&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">crash_app_on_aerospike_exception</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Crashes the app on an aerospike Exceptions.</span>

<span class="sd">        If True, crashes the app and prevents the commit offset on progressing. If False</span>
<span class="sd">        client has to catch the Error and implement a dead letter queue</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Stream</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Int</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;0.6.10&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;AEROSPIKE_RETRIES_ON_EXCEPTION&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">aerospike_retries_on_exception</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Number of retries to aerospike on a runtime error from the aerospike client.</span>

<span class="sd">        Set this to the number of retries using the aerospike client on a runtime</span>
<span class="sd">        Exception thrown by the client</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Stream</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Int</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;0.6.10&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;AEROSPIKE_SLEEP_SECONDS_BETWEEN_RETRIES_ON_EXCEPTION&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">aerospike_sleep_seconds_between_retries_on_exception</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Seconds to sleep between retries to aerospike on a runtime error from</span>
<span class="sd">        the aerospike client.</span>

<span class="sd">        Set this to the sleep in seconds between retries using the aerospike</span>
<span class="sd">        client on a runtime Exception thrown by the client</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">RPC</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Bool</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;APP_REPLY_CREATE_TOPIC&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">reply_create_topic</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Automatically create reply topics.</span>

<span class="sd">        Set this to :const:`True` if you plan on using the RPC with agents.</span>

<span class="sd">        This will create the internal topic used for RPC replies on that</span>
<span class="sd">        instance at startup.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">RPC</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Seconds</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;APP_REPLY_EXPIRES&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">want_seconds</span><span class="p">(</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)),</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">reply_expires</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;RPC reply expiry time in seconds.</span>

<span class="sd">        The expiry time (in seconds :class:`float`,</span>
<span class="sd">        or :class:`~datetime.timedelta`), for how long replies will stay</span>
<span class="sd">        in the instances local reply topic before being removed.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">RPC</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Str</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">reply_to</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Reply to address.</span>

<span class="sd">        The name of the reply topic used by this instance.</span>
<span class="sd">        If not set one will be automatically generated when the app</span>
<span class="sd">        is created.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@reply_to</span><span class="o">.</span><span class="n">on_set_default</span>  <span class="c1"># type: ignore</span>
    <span class="k">def</span> <span class="nf">_prepare_reply_to_default</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">f</span><span class="s2">&quot;</span><span class="si">{self.reply_to_prefix}</span><span class="s2">{uuid4()}&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">RPC</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Str</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;APP_REPLY_TO_PREFIX&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;f-reply-&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">reply_to_prefix</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Reply address topic name prefix.</span>

<span class="sd">        The prefix used when generating reply topic names.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Common</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Enum</span><span class="p">(</span><span class="n">ProcessingGuarantee</span><span class="p">),</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.5&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;PROCESSING_GUARANTEE&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">ProcessingGuarantee</span><span class="o">.</span><span class="n">AT_LEAST_ONCE</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">processing_guarantee</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ProcessingGuarantee</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;The processing guarantee that should be used.</span>

<span class="sd">        Possible values are &quot;at_least_once&quot; (default) and &quot;exactly_once&quot;.</span>

<span class="sd">        Note that if exactly-once processing is enabled consumers are</span>
<span class="sd">        configured with ``isolation.level=&quot;read_committed&quot;`` and producers</span>
<span class="sd">        are configured with ``retries=Integer.MAX_VALUE`` and</span>
<span class="sd">        ``enable.idempotence=true`` per default.</span>

<span class="sd">        Note that by default exactly-once processing requires a cluster of</span>
<span class="sd">        at least three brokers what is the recommended setting for production.</span>
<span class="sd">        For development you can change this, by adjusting broker setting</span>
<span class="sd">        ``transaction.state.log.replication.factor`` to the number of brokers</span>
<span class="sd">        you want to use.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Stream</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">UnsignedInt</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;STREAM_BUFFER_MAXSIZE&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">4096</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">stream_buffer_maxsize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Stream buffer maximum size.</span>

<span class="sd">        This setting control back pressure to streams and agents reading</span>
<span class="sd">        from streams.</span>

<span class="sd">        If set to 4096 (default) this means that an agent can only keep</span>
<span class="sd">        at most 4096 unprocessed items in the stream buffer.</span>

<span class="sd">        Essentially this will limit the number of messages a stream</span>
<span class="sd">        can &quot;prefetch&quot;.</span>

<span class="sd">        Higher numbers gives better throughput, but do note that if</span>
<span class="sd">        your agent sends messages or update tables (which</span>
<span class="sd">        sends changelog messages).</span>

<span class="sd">        This means that if the buffer size is large, the</span>
<span class="sd">        :setting:`broker_commit_interval` or :setting:`broker_commit_every`</span>
<span class="sd">        settings must be set to commit frequently, avoiding back pressure</span>
<span class="sd">        from building up.</span>

<span class="sd">        A buffer size of 131_072 may let you process over 30,000 events</span>
<span class="sd">        a second as a baseline, but be careful with a buffer size that large</span>
<span class="sd">        when you also send messages or update tables.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Stream</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Seconds</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.10&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;STREAM_PROCESSING_TIMEOUT&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">5</span> <span class="o">*</span> <span class="mf">60.0</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">stream_processing_timeout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Stream processing timeout.</span>

<span class="sd">        Timeout (in seconds) for processing events in the stream.</span>
<span class="sd">        If processing of a single event exceeds this time we log an error,</span>
<span class="sd">        but do not stop processing.</span>

<span class="sd">        If you are seeing a warning like this you should either</span>

<span class="sd">        1) increase this timeout to allow agents to spend more time</span>
<span class="sd">            on a single event, or</span>
<span class="sd">        2) add a timeout to the operation in the agent, so stream processing</span>
<span class="sd">            always completes before the timeout.</span>

<span class="sd">        The latter is preferred for network operations such as web requests.</span>
<span class="sd">        If a network service you depend on is temporarily offline you should</span>
<span class="sd">        consider doing retries (send to separate topic):</span>

<span class="sd">        .. sourcecode:: python</span>

<span class="sd">            main_topic = app.topic(&#39;main&#39;)</span>
<span class="sd">            deadletter_topic = app.topic(&#39;main_deadletter&#39;)</span>

<span class="sd">            async def send_request(value, timeout: Optional[float] = None) -&gt; None:</span>
<span class="sd">                await app.http_client.get(&#39;http://foo.com&#39;, timeout=timeout)</span>

<span class="sd">            @app.agent(main_topic)</span>
<span class="sd">            async def main(stream):</span>
<span class="sd">                async for value in stream:</span>
<span class="sd">                try:</span>
<span class="sd">                    await send_request(value, timeout=5)</span>
<span class="sd">                except asyncio.TimeoutError:</span>
<span class="sd">                    await deadletter_topic.send(value)</span>

<span class="sd">            @app.agent(deadletter_topic)</span>
<span class="sd">                async def main_deadletter(stream):</span>
<span class="sd">                    async for value in stream:</span>
<span class="sd">                    # wait for 30 seconds before retrying.</span>
<span class="sd">                    await stream.sleep(30)</span>
<span class="sd">                    await send_request(value)</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Stream</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Bool</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">stream_publish_on_commit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Stream delay producing until commit time.</span>

<span class="sd">        If enabled we buffer up sending messages until the</span>
<span class="sd">        source topic offset related to that processing is committed.</span>
<span class="sd">        This means when we do commit, we may have buffered up a LOT of messages</span>
<span class="sd">        so commit needs to happen frequently (make sure to decrease</span>
<span class="sd">        :setting:`broker_commit_every`).</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Stream</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Seconds</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.3&quot;</span><span class="p">,</span>
        <span class="n">version_changed</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;1.5.3&quot;</span><span class="p">:</span> <span class="s2">&quot;Disabled by default.&quot;</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;STREAM_RECOVERY_DELAY&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">stream_recovery_delay</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Stream recovery delayl</span>

<span class="sd">        Number of seconds to sleep before continuing after rebalance.</span>
<span class="sd">        We wait for a bit to allow for more nodes to join/leave before</span>
<span class="sd">        starting recovery tables and then processing streams. This to minimize</span>
<span class="sd">        the chance of errors rebalancing loops.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Stream</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Bool</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;STREAM_WAIT_EMPTY&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">stream_wait_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Stream wait empty.</span>

<span class="sd">        This setting controls whether the worker should wait for the</span>
<span class="sd">        currently processing task in an agent to complete before</span>
<span class="sd">        rebalancing or shutting down.</span>

<span class="sd">        On rebalance/shut down we clear the stream buffers. Those events</span>
<span class="sd">        will be reprocessed after the rebalance anyway, but we may have</span>
<span class="sd">        already started processing one event in every agent, and if we</span>
<span class="sd">        rebalance we will process that event again.</span>

<span class="sd">        By default we will wait for the currently active tasks, but if your</span>
<span class="sd">        streams are idempotent you can disable it using this setting.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Common</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">URL</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;APP_STORE&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;memory://&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">store</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">URL</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Table storage backend URL.</span>

<span class="sd">        The backend used for table storage.</span>

<span class="sd">        Tables are stored in-memory by default, but you should</span>
<span class="sd">        not use the ``memory://`` store in production.</span>

<span class="sd">        In production, a persistent table store, such as ``rocksdb://`` is</span>
<span class="sd">        preferred.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Table</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Seconds</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;TABLE_CLEANUP_INTERVAL&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mf">30.0</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">table_cleanup_interval</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Table cleanup interval.</span>

<span class="sd">        How often we cleanup tables to remove expired entries.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Table</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">UnsignedInt</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.7&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;TABLE_KEY_INDEX_SIZE&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">table_key_index_size</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Table key index size.</span>

<span class="sd">        Tables keep a cache of key to partition number to speed up</span>
<span class="sd">        table lookups.</span>

<span class="sd">        This setting configures the maximum size of that cache.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Table</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">UnsignedInt</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;TABLE_STANDBY_REPLICAS&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">table_standby_replicas</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Table standby replicas.</span>

<span class="sd">        The number of standby replicas for each table.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Topic</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Bool</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.5&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;TOPIC_ALLOW_DECLARE&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">topic_allow_declare</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Allow creating new topics.</span>

<span class="sd">        This setting disables the creation of internal topics.</span>

<span class="sd">        Faust will only create topics that it considers to be fully</span>
<span class="sd">        owned and managed, such as intermediate repartition topics,</span>
<span class="sd">        table changelog topics etc.</span>

<span class="sd">        Some Kafka managers does not allow services to create topics,</span>
<span class="sd">        in that case you should set this to :const:`False`.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Topic</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Bool</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.7&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;TOPIC_DISABLE_LEADER&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">topic_disable_leader</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Disable leader election topic.</span>

<span class="sd">        This setting disables the creation of the leader election topic.</span>

<span class="sd">        If you&#39;re not using the ``on_leader=True`` argument to task/timer/etc.,</span>
<span class="sd">        decorators then use this setting to disable creation of the topic.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Topic</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">UnsignedInt</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;TOPIC_PARTITIONS&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">topic_partitions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Topic partitions.</span>

<span class="sd">        Default number of partitions for new topics.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This defines the maximum number of workers we could distribute the</span>
<span class="sd">            workload of the application (also sometimes referred as the</span>
<span class="sd">            sharding factor of the application).</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Topic</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">UnsignedInt</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;TOPIC_REPLICATION_FACTOR&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">topic_replication_factor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Topic replication factor.</span>

<span class="sd">        The default replication factor for topics created by the application.</span>

<span class="sd">        .. note::</span>

<span class="sd">            Generally this should be the same as the configured</span>
<span class="sd">            replication factor for your Kafka cluster.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Common</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">URL</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.2&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;CACHE_URL&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;memory://&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">cache</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">URL</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Cache backend URL.</span>

<span class="sd">        Optional backend used for Memcached-style caching.</span>
<span class="sd">        URL can be:</span>

<span class="sd">        + ``redis://host``</span>
<span class="sd">        + ``rediscluster://host``, or</span>
<span class="sd">        + ``memory://``.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">WebServer</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">URL</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.2&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;aiohttp://&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">web</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">URL</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Web server driver to use.&quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">WebServer</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Str</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.2&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;WEB_BIND&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">WEB_BIND</span><span class="p">,</span>
        <span class="n">related_cli_options</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;faust worker&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;--web-bind&quot;</span><span class="p">]},</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">web_bind</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Web network interface binding mask.</span>

<span class="sd">        The IP network address mask that decides what interfaces</span>
<span class="sd">        the web server will bind to.</span>

<span class="sd">        By default this will bind to all interfaces.</span>

<span class="sd">        This option is usually set by :option:`faust worker --web-bind`,</span>
<span class="sd">        not by passing it as a keyword argument to :class:`app`.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">WebServer</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="n">ResourceOptions</span><span class="p">],</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.5&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">web_cors_options</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ResourceOptions</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Cross Origin Resource Sharing options.</span>

<span class="sd">        Enable `Cross-Origin Resource Sharing`_ options for all web views</span>
<span class="sd">        in the internal web server.</span>

<span class="sd">        This should be specified as a dictionary of</span>
<span class="sd">        URLs to :class:`~faust.web.ResourceOptions`:</span>

<span class="sd">        .. sourcecode:: python</span>

<span class="sd">            app = App(..., web_cors_options={</span>
<span class="sd">                &#39;http://foo.example.com&#39;: ResourceOptions(</span>
<span class="sd">                    allow_credentials=True,</span>
<span class="sd">                    allow_methods=&#39;*&#39;k,</span>
<span class="sd">                )</span>
<span class="sd">            })</span>

<span class="sd">        Individual views may override the CORS options used as</span>
<span class="sd">        arguments to to ``@app.page`` and ``blueprint.route``.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            :pypi:`aiohttp_cors`: https://github.com/aio-libs/aiohttp-cors</span>

<span class="sd">        .. _`Cross-Origin Resource Sharing`:</span>
<span class="sd">            https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">WebServer</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Bool</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.2&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;APP_WEB_ENABLED&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">related_cli_options</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;faust worker&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;--with-web&quot;</span><span class="p">]},</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">web_enabled</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Enable/disable internal web server.</span>

<span class="sd">        Enable web server and other web components.</span>

<span class="sd">        This option can also be set using :option:`faust worker --without-web`.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">WebServer</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Str</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.2&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;WEB_HOST&quot;</span><span class="p">,</span>
        <span class="n">default_template</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{conf.NODE_HOSTNAME}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">related_cli_options</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;faust worker&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;--web-host&quot;</span><span class="p">]},</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">web_host</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Web server host name.</span>

<span class="sd">        Hostname used to access this web server, used for generating</span>
<span class="sd">        the :setting:`canonical_url` setting.</span>

<span class="sd">        This option is usually set by :option:`faust worker --web-host`,</span>
<span class="sd">        not by passing it as a keyword argument to :class:`app`.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">WebServer</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Bool</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.5&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">web_in_thread</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Run the web server in a separate thread.</span>

<span class="sd">        Use this if you have a large value for</span>
<span class="sd">        :setting:`stream_buffer_maxsize` and want the web server</span>
<span class="sd">        to be responsive when the worker is otherwise busy processing streams.</span>

<span class="sd">        .. note::</span>

<span class="sd">            Running the web server in a separate thread means web views</span>
<span class="sd">            and agents will not share the same event loop.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">WebServer</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Port</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.2&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;WEB_PORT&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">WEB_PORT</span><span class="p">,</span>
        <span class="n">related_cli_options</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;faust worker&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;--web-port&quot;</span><span class="p">]},</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">web_port</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Web server port.</span>

<span class="sd">        A port number between 1024 and 65535 to use for the web server.</span>

<span class="sd">        This option is usually set by :option:`faust worker --web-port`,</span>
<span class="sd">        not by passing it as a keyword argument to :class:`app`.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">WebServer</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">SSLContext</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;0.5.0&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">web_ssl_context</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ssl</span><span class="o">.</span><span class="n">SSLContext</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Web server SSL configuration.</span>

<span class="sd">        See :setting:`credentials`.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">WebServer</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">URL</span><span class="p">,</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.2&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">WEB_TRANSPORT</span><span class="p">,</span>
        <span class="n">related_cli_options</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;faust worker&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;--web-transport&quot;</span><span class="p">]},</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">web_transport</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">URL</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Network transport used for the web server.</span>

<span class="sd">        Default is to use TCP, but this setting also enables you to use</span>
<span class="sd">        Unix domainN sockets.  To use domain sockets specify an URL including</span>
<span class="sd">        the path to the file you want to create like this:</span>

<span class="sd">        .. sourcecode:: text</span>

<span class="sd">            unix:///tmp/server.sock</span>

<span class="sd">        This will create a new domain socket available</span>
<span class="sd">        in :file:`/tmp/server.sock`.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">WebServer</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">URL</span><span class="p">,</span>
        <span class="n">default_template</span><span class="o">=</span><span class="s2">&quot;http://</span><span class="si">{conf.web_host}</span><span class="s2">:</span><span class="si">{conf.web_port}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;NODE_CANONICAL_URL&quot;</span><span class="p">,</span>
        <span class="n">related_cli_options</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;faust worker&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;--web-host&quot;</span><span class="p">,</span> <span class="s2">&quot;--web-port&quot;</span><span class="p">],</span>
        <span class="p">},</span>
        <span class="n">related_settings</span><span class="o">=</span><span class="p">[</span><span class="n">web_host</span><span class="p">,</span> <span class="n">web_port</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">canonical_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">URL</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Node specific canonical URL.</span>

<span class="sd">        You shouldn&#39;t have to set this manually.</span>

<span class="sd">        The canonical URL defines how to reach the web server on a running</span>
<span class="sd">        worker node, and is usually set by combining the</span>
<span class="sd">        :setting:`web_host` and :setting:`web_port` settings.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Worker</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Bool</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;WORKER_REDIRECT_STDOUTS&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">worker_redirect_stdouts</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Redirecting standard outputs.</span>

<span class="sd">        Enable to have the worker redirect output to :data:`sys.stdout` and</span>
<span class="sd">        :data:`sys.stderr` to the Python logging system.</span>

<span class="sd">        Enabled by default.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Worker</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Severity</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;WORKER_REDIRECT_STDOUTS_LEVEL&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;WARN&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">worker_redirect_stdouts_level</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Severity</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Level used when redirecting standard outputs.</span>

<span class="sd">        The logging level to use when redirect STDOUT/STDERR to logging.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Extension</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="n">Type</span><span class="p">[</span><span class="n">AgentT</span><span class="p">]),</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;faust:Agent&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">Agent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">AgentT</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Agent class type.</span>

<span class="sd">        The :class:`~faust.Agent` class to use for agents, or the</span>
<span class="sd">        fully-qualified path to one (supported by</span>
<span class="sd">        :func:`~mode.utils.imports.symbol_by_name`).</span>

<span class="sd">        Example using a class::</span>

<span class="sd">            class MyAgent(faust.Agent):</span>
<span class="sd">                ...</span>

<span class="sd">            app = App(..., Agent=MyAgent)</span>

<span class="sd">        Example using the string path to a class::</span>

<span class="sd">            app = App(..., Agent=&#39;myproj.agents.Agent&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Consumer</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="n">Type</span><span class="p">[</span><span class="n">SchedulingStrategyT</span><span class="p">]),</span>
        <span class="n">version_introduced</span><span class="o">=</span><span class="s2">&quot;1.5&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;faust.transport.utils:DefaultSchedulingStrategy&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">ConsumerScheduler</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">SchedulingStrategyT</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Consumer scheduler class.</span>

<span class="sd">        A strategy which dictates the priority of topics and</span>
<span class="sd">        partitions for incoming records.</span>
<span class="sd">        The default strategy does first round-robin over topics and then</span>
<span class="sd">        round-robin over partitions.</span>

<span class="sd">        Example using a class::</span>

<span class="sd">            class MySchedulingStrategy(DefaultSchedulingStrategy):</span>
<span class="sd">                ...</span>

<span class="sd">            app = App(..., ConsumerScheduler=MySchedulingStrategy)</span>

<span class="sd">        Example using the string path to a class::</span>

<span class="sd">            app = App(..., ConsumerScheduler=&#39;myproj.MySchedulingStrategy&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Extension</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="n">Type</span><span class="p">[</span><span class="n">EventT</span><span class="p">]),</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;faust:Event&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">Event</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">EventT</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Event class type.</span>

<span class="sd">        The :class:`~faust.Event` class to use for creating new event objects,</span>
<span class="sd">        or the fully-qualified path to one (supported by</span>
<span class="sd">        :func:`~mode.utils.imports.symbol_by_name`).</span>

<span class="sd">        Example using a class::</span>

<span class="sd">            class MyBaseEvent(faust.Event):</span>
<span class="sd">                ...</span>

<span class="sd">            app = App(..., Event=MyBaseEvent)</span>

<span class="sd">        Example using the string path to a class::</span>

<span class="sd">            app = App(..., Event=&#39;myproj.events.Event&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Extension</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="n">Type</span><span class="p">[</span><span class="n">SchemaT</span><span class="p">]),</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;faust:Schema&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">Schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">SchemaT</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Schema class type.</span>

<span class="sd">        The :class:`~faust.Schema` class to use as the default</span>
<span class="sd">        schema type when no schema specified. or the fully-qualified</span>
<span class="sd">        path to one (supported by :func:`~mode.utils.imports.symbol_by_name`).</span>

<span class="sd">        Example using a class::</span>

<span class="sd">            class MyBaseSchema(faust.Schema):</span>
<span class="sd">                ...</span>

<span class="sd">            app = App(..., Schema=MyBaseSchema)</span>

<span class="sd">        Example using the string path to a class::</span>

<span class="sd">            app = App(..., Schema=&#39;myproj.schemas.Schema&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Extension</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="n">Type</span><span class="p">[</span><span class="n">StreamT</span><span class="p">]),</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;faust:Stream&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">Stream</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">StreamT</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Stream class type.</span>

<span class="sd">        The :class:`~faust.Stream` class to use for streams, or the</span>
<span class="sd">        fully-qualified path to one (supported by</span>
<span class="sd">        :func:`~mode.utils.imports.symbol_by_name`).</span>

<span class="sd">        Example using a class::</span>

<span class="sd">            class MyBaseStream(faust.Stream):</span>
<span class="sd">                ...</span>

<span class="sd">            app = App(..., Stream=MyBaseStream)</span>

<span class="sd">        Example using the string path to a class::</span>

<span class="sd">            app = App(..., Stream=&#39;myproj.streams.Stream&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Extension</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="n">Type</span><span class="p">[</span><span class="n">TableT</span><span class="p">]),</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;faust:Table&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">Table</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">TableT</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Table class type.</span>

<span class="sd">        The :class:`~faust.Table` class to use for tables, or the</span>
<span class="sd">        fully-qualified path to one (supported by</span>
<span class="sd">        :func:`~mode.utils.imports.symbol_by_name`).</span>

<span class="sd">        Example using a class::</span>

<span class="sd">            class MyBaseTable(faust.Table):</span>
<span class="sd">                ...</span>

<span class="sd">            app = App(..., Table=MyBaseTable)</span>

<span class="sd">        Example using the string path to a class::</span>

<span class="sd">            app = App(..., Table=&#39;myproj.tables.Table&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Extension</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="n">Type</span><span class="p">[</span><span class="n">TableT</span><span class="p">]),</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;faust:SetTable&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">SetTable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">TableT</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;SetTable extension table.</span>

<span class="sd">        The :class:`~faust.SetTable` class to use for table-of-set tables,</span>
<span class="sd">        or the fully-qualified path to one (supported</span>
<span class="sd">        by :func:`~mode.utils.imports.symbol_by_name`).</span>

<span class="sd">        Example using a class::</span>

<span class="sd">            class MySetTable(faust.SetTable):</span>
<span class="sd">                ...</span>

<span class="sd">            app = App(..., Table=MySetTable)</span>

<span class="sd">        Example using the string path to a class::</span>

<span class="sd">            app = App(..., Table=&#39;myproj.tables.MySetTable&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Extension</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="n">Type</span><span class="p">[</span><span class="n">GlobalTableT</span><span class="p">]),</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;faust:GlobalTable&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">GlobalTable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">GlobalTableT</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;GlobalTable class type.</span>

<span class="sd">        The :class:`~faust.GlobalTable` class to use for tables,</span>
<span class="sd">        or the fully-qualified path to one (supported by</span>
<span class="sd">        :func:`~mode.utils.imports.symbol_by_name`).</span>

<span class="sd">        Example using a class::</span>

<span class="sd">            class MyBaseGlobalTable(faust.GlobalTable):</span>
<span class="sd">                ...</span>

<span class="sd">            app = App(..., GlobalTable=MyBaseGlobalTable)</span>

<span class="sd">        Example using the string path to a class::</span>

<span class="sd">            app = App(..., GlobalTable=&#39;myproj.tables.GlobalTable&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Extension</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="n">Type</span><span class="p">[</span><span class="n">GlobalTableT</span><span class="p">]),</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;faust:SetGlobalTable&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">SetGlobalTable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">GlobalTableT</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;SetGlobalTable class type.</span>

<span class="sd">        The :class:`~faust.SetGlobalTable` class to use for tables, or the</span>
<span class="sd">        fully-qualified path to one (supported by</span>
<span class="sd">        :func:`~mode.utils.imports.symbol_by_name`).</span>

<span class="sd">        Example using a class::</span>

<span class="sd">            class MyBaseSetGlobalTable(faust.SetGlobalTable):</span>
<span class="sd">                ...</span>

<span class="sd">            app = App(..., SetGlobalTable=MyBaseGlobalSetTable)</span>

<span class="sd">        Example using the string path to a class::</span>

<span class="sd">            app = App(..., SetGlobalTable=&#39;myproj.tables.SetGlobalTable&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Extension</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="n">Type</span><span class="p">[</span><span class="n">TableManagerT</span><span class="p">]),</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;faust.tables:TableManager&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">TableManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">TableManagerT</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Table manager class type.</span>

<span class="sd">        The :class:`~faust.tables.TableManager` used for managing tables,</span>
<span class="sd">        or the fully-qualified path to one (supported by</span>
<span class="sd">        :func:`~mode.utils.imports.symbol_by_name`).</span>

<span class="sd">        Example using a class::</span>

<span class="sd">            from faust.tables import TableManager</span>

<span class="sd">            class MyTableManager(TableManager):</span>
<span class="sd">                ...</span>

<span class="sd">            app = App(..., TableManager=MyTableManager)</span>

<span class="sd">        Example using the string path to a class::</span>

<span class="sd">            app = App(..., TableManager=&#39;myproj.tables.TableManager&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Extension</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="n">Type</span><span class="p">[</span><span class="n">RegistryT</span><span class="p">]),</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;faust.serializers:Registry&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">Serializers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">RegistryT</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Serializer registry class type.</span>

<span class="sd">        The :class:`~faust.serializers.Registry` class used for</span>
<span class="sd">        serializing/deserializing messages; or the fully-qualified path</span>
<span class="sd">        to one (supported by :func:`~mode.utils.imports.symbol_by_name`).</span>

<span class="sd">        Example using a class::</span>

<span class="sd">            from faust.serialiers import Registry</span>

<span class="sd">            class MyRegistry(Registry):</span>
<span class="sd">                ...</span>

<span class="sd">            app = App(..., Serializers=MyRegistry)</span>

<span class="sd">        Example using the string path to a class::</span>

<span class="sd">            app = App(..., Serializers=&#39;myproj.serializers.Registry&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Extension</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="n">Type</span><span class="p">[</span><span class="n">_WorkerT</span><span class="p">]),</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;faust.worker:Worker&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">Worker</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">_WorkerT</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Worker class type.</span>

<span class="sd">        The :class:`~faust.Worker` class used for starting a worker</span>
<span class="sd">        for this app; or the fully-qualified path</span>
<span class="sd">        to one (supported by :func:`~mode.utils.imports.symbol_by_name`).</span>

<span class="sd">        Example using a class::</span>

<span class="sd">            import faust</span>

<span class="sd">            class MyWorker(faust.Worker):</span>
<span class="sd">                ...</span>

<span class="sd">            app = faust.App(..., Worker=Worker)</span>

<span class="sd">        Example using the string path to a class::</span>

<span class="sd">            app = faust.App(..., Worker=&#39;myproj.workers.Worker&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Extension</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="n">Type</span><span class="p">[</span><span class="n">PartitionAssignorT</span><span class="p">]),</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;faust.assignor:PartitionAssignor&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">PartitionAssignor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">PartitionAssignorT</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Partition assignor class type.</span>

<span class="sd">        The :class:`~faust.assignor.PartitionAssignor` class used for assigning</span>
<span class="sd">        topic partitions to worker instances; or the fully-qualified path</span>
<span class="sd">        to one (supported by :func:`~mode.utils.imports.symbol_by_name`).</span>

<span class="sd">        Example using a class::</span>

<span class="sd">            from faust.assignor import PartitionAssignor</span>

<span class="sd">            class MyPartitionAssignor(PartitionAssignor):</span>
<span class="sd">                ...</span>

<span class="sd">            app = App(..., PartitionAssignor=PartitionAssignor)</span>

<span class="sd">        Example using the string path to a class::</span>

<span class="sd">            app = App(..., Worker=&#39;myproj.assignor.PartitionAssignor&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Extension</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="n">Type</span><span class="p">[</span><span class="n">LeaderAssignorT</span><span class="p">]),</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;faust.assignor:LeaderAssignor&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">LeaderAssignor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">LeaderAssignorT</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Leader assignor class type.</span>

<span class="sd">        The :class:`~faust.assignor.LeaderAssignor` class used for assigning</span>
<span class="sd">        a master Faust instance for the app; or the fully-qualified path</span>
<span class="sd">        to one (supported by :func:`~mode.utils.imports.symbol_by_name`).</span>

<span class="sd">        Example using a class::</span>

<span class="sd">            from faust.assignor import LeaderAssignor</span>

<span class="sd">            class MyLeaderAssignor(LeaderAssignor):</span>
<span class="sd">                ...</span>

<span class="sd">            app = App(..., LeaderAssignor=LeaderAssignor)</span>

<span class="sd">        Example using the string path to a class::</span>

<span class="sd">            app = App(..., Worker=&#39;myproj.assignor.LeaderAssignor&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Extension</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="n">Type</span><span class="p">[</span><span class="n">RouterT</span><span class="p">]),</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;faust.app.router:Router&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">Router</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">RouterT</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Router class type.</span>

<span class="sd">        The :class:`~faust.router.Router` class used for routing requests</span>
<span class="sd">        to a worker instance having the partition for a specific</span>
<span class="sd">        key (e.g. table key); or the fully-qualified path to one</span>
<span class="sd">        (supported by :func:`~mode.utils.imports.symbol_by_name`).</span>

<span class="sd">        Example using a class::</span>

<span class="sd">            from faust.router import Router</span>

<span class="sd">            class MyRouter(Router):</span>
<span class="sd">                ...</span>

<span class="sd">            app = App(..., Router=Router)</span>

<span class="sd">        Example using the string path to a class::</span>

<span class="sd">            app = App(..., Router=&#39;myproj.routers.Router&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Extension</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="n">Type</span><span class="p">[</span><span class="n">TopicT</span><span class="p">]),</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;faust:Topic&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">Topic</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">TopicT</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Topic class type.</span>

<span class="sd">        The :class:`~faust.Topic` class used for defining new topics; or the</span>
<span class="sd">        fully-qualified path to one (supported by</span>
<span class="sd">        :func:`~mode.utils.imports.symbol_by_name`).</span>

<span class="sd">        Example using a class::</span>

<span class="sd">            import faust</span>

<span class="sd">            class MyTopic(faust.Topic):</span>
<span class="sd">                ...</span>

<span class="sd">            app = faust.App(..., Topic=MyTopic)</span>

<span class="sd">        Example using the string path to a class::</span>

<span class="sd">            app = faust.App(..., Topic=&#39;myproj.topics.Topic&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Extension</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="n">Type</span><span class="p">[</span><span class="n">HttpClientT</span><span class="p">]),</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;aiohttp.client:ClientSession&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">HttpClient</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">HttpClientT</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Http client class type</span>

<span class="sd">        The :class:`aiohttp.client.ClientSession` class used as</span>
<span class="sd">        a HTTP client; or the fully-qualified path to one (supported by</span>
<span class="sd">        :func:`~mode.utils.imports.symbol_by_name`).</span>

<span class="sd">        Example using a class::</span>

<span class="sd">            import faust</span>
<span class="sd">            from aiohttp.client import ClientSession</span>

<span class="sd">            class HttpClient(ClientSession):</span>
<span class="sd">                ...</span>

<span class="sd">            app = faust.App(..., HttpClient=HttpClient)</span>

<span class="sd">        Example using the string path to a class::</span>

<span class="sd">            app = faust.App(..., HttpClient=&#39;myproj.http.HttpClient&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Extension</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="n">Type</span><span class="p">[</span><span class="n">SensorT</span><span class="p">]),</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;faust.sensors:Monitor&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">Monitor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">SensorT</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Monitor sensor class type.</span>

<span class="sd">        The :class:`~faust.sensors.Monitor` class as the main sensor</span>
<span class="sd">        gathering statistics for the application; or the</span>
<span class="sd">        fully-qualified path to one (supported by</span>
<span class="sd">        :func:`~mode.utils.imports.symbol_by_name`).</span>

<span class="sd">        Example using a class::</span>

<span class="sd">            import faust</span>
<span class="sd">            from faust.sensors import Monitor</span>

<span class="sd">            class MyMonitor(Monitor):</span>
<span class="sd">                ...</span>

<span class="sd">            app = faust.App(..., Monitor=MyMonitor)</span>

<span class="sd">        Example using the string path to a class::</span>

<span class="sd">            app = faust.App(..., Monitor=&#39;myproj.monitors.Monitor&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Stream</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Bool</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">version_deprecated</span><span class="o">=</span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
        <span class="n">deprecation_reason</span><span class="o">=</span><span class="s2">&quot;no longer has any effect&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">stream_ack_cancelled_tasks</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Deprecated setting has no effect.&quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Stream</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">Bool</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">version_deprecated</span><span class="o">=</span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
        <span class="n">deprecation_reason</span><span class="o">=</span><span class="s2">&quot;no longer has any effect&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">stream_ack_exceptions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Deprecated setting has no effect.&quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Producer</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">UnsignedInt</span><span class="p">,</span>
        <span class="n">env_name</span><span class="o">=</span><span class="s2">&quot;PRODUCER_LINGER_MS&quot;</span><span class="p">,</span>
        <span class="n">version_deprecated</span><span class="o">=</span><span class="s2">&quot;1.11&quot;</span><span class="p">,</span>
        <span class="n">deprecation_reason</span><span class="o">=</span><span class="s2">&quot;use producer_linger in seconds instead.&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">producer_linger_ms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Deprecated setting, please use :setting:`producer_linger` instead.</span>

<span class="sd">        This used to be provided as milliseconds, the new setting</span>
<span class="sd">        uses seconds.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@sections</span><span class="o">.</span><span class="n">Common</span><span class="o">.</span><span class="n">setting</span><span class="p">(</span>
        <span class="n">params</span><span class="o">.</span><span class="n">URL</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">version_deprecated</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="n">deprecation_reason</span><span class="o">=</span><span class="s1">&#39;Please use &quot;broker&quot; setting instead&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">URL</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Backward compatibility alias to :setting:`broker`.&quot;&quot;&quot;</span></div>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../../index.html">
              <img class="logo" src="../../../../_static/logo.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../../../../index.html">Faust</a></h1>



<p class="blurb">A library for building streaming applications in Python.</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=robinhood&repo=faust&type=star&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





    

<p>
<a class="badge" href="https://travis-ci.org/robinhood/faust">
    <img
        alt="https://secure.travis-ci.org/robinhood/faust.svg?branch=master"
        src="https://secure.travis-ci.org/robinhood/faust.svg?branch=master"
    />
</a>
</p>


<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../copyright.html">Copyright</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction.html">Introducing Faust</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../playbooks/index.html">Playbooks</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../userguide/index.html">User Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq.html">Frequently Asked Questions (FAQ)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developerguide/index.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../history/index.html">History</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../authors.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../glossary.html">Glossary</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../../index.html">Documentation overview</a><ul>
  <li><a href="../../../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017-2020, 2021-2022 Community, Robinhood Markets, Inc..
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.1.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    
    <a href="https://github.com/robinhood/faust" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>